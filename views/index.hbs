<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kisan Kart</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="mediaqueries.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="../public/endpage.css">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Anek+Devanagari:wght@100..800&family=Bebas+Neue&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');

      * {
        margin: 0px;
      }

      body {
        background-color: rgb(236, 228, 228);
        overflow-x: hidden;
      }

      .navbar {
        width: 100%;
        height: 14vh;
        background-color: lightgreen;
        display: flex;
        align-items: center;
        justify-content: space-evenly;
        box-sizing: border-box;
        padding: 1vh;
        padding-top: 0;
        padding-bottom: 0;
      }

      .bordr {
        border: 2px solid black;
      }

      .kklogo {
        height: 13.8vh;
        width: 13.8vh;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-image: url("KISAN_KART.png");
      }

      .uppercontent {
        box-sizing: border-box;
        padding: 1vh;
        display: flex;
        flex-direction: row;
        justify-content: space-evenly;
        align-items: center;
      }

      .navcontent {
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .size1 {
        width: 13vw;
        height: 100%;
      }

      .location {
        display: flex;
        align-items: center;
      }

      .loclogo,
      .fa-location-dot {
        font-size: 1.3vw;
        margin: 0.4vh;
      }

      .searchbar {
        width: 50vw;
        height: 5vh;
        display: flex;
        align-items: center;
        position: relative;
      }

      #searchInput {
        width: 100%;
        height: 100%;
        border-radius: 20px;
      }

      .searchbutton {
        height: 100%;
        border-radius: 0;
        background-color: transparent;
        border: none;
        position: absolute;
        top: 0;
        right: 0;
        margin-right: 1rem;
        font-size: 1.5rem;
      }

      .searchbutton:hover {
        cursor: pointer;
      }

      .size2 {
        height: 8vh;
        width: 2vw;
      }

      .logo {
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;

      }

      .fa-cart-shopping {
        font-size: 1.8vw;
      }

      a {
        text-decoration: none;
        color: black;
      }

      .userlogo {
        display: flex;
        align-items: center;
      }

      .login {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        justify-content: space-between;
      }

      .logodiv {
        display: flex;
        flex-direction: column;



      }

      .loginbottom {
        height: fit-content;
        z-index: 1;
      }

      .logotext {
        position: relative;
        height: fit-content;

        text-align: left;
        font-weight: bold;
        font-size: 2vh;
      }

      .joinasseller {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        justify-content: center;

          {
            {
            !-- padding: 0.4vh;
            --
          }
        }

        align-items: center;
        font-weight: bold;
      }

      .to-top {
        background: #599516;
        position: fixed;
        margin-bottom: 2.5vh;
        bottom: 16px;
        left: 25px;
        width: 35px;
        height: 35px;

        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 25px;
        color: whitesmoke;
        text-decoration: none;
        opacity: 0;
        pointer-events: none;
        transition: all 0.4s;
      }

      .to-top.active {
        bottom: 32px;
        pointer-events: auto;
        opacity: 1;
      }

      .box1 {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 70%;
        width: 7vw;
        border-radius: 100px;
        font-size: 2.3vh;
        font-weight: 500;
        margin: 2vw;
      }

      .midpage {
        margin: 1.3vh;
      }

      .banner {
        display: flex;
        align-items: center;
        box-sizing: border-box;
        background-image: url("banner1.png");
        background-size: cover;
        justify-content: space-between;
        transition: background-image 1.5s ease;

      }

      .change_banner {
        background-color: white;
        border: 0;
        position: absolute;
        height: 15vh;
        width: 5vh;
      }

      .size4 {
        height: 42vh;
      }

      .previous_banner {
        border-top-right-radius: 10px;
        border-bottom-right-radius: 10px;
        top: 30vh;
      }

      .next_banner {
        border-top-left-radius: 10px;
        border-bottom-left-radius: 10px;
        top: 30vh;
        right: 7px;
      }

      .category {
        padding-bottom: 3vh;
        padding-top: 3vh;
        background-color: white;
        padding-left: 2vw;
        display: flex;
        justify-content: space-between;
        padding-right: 3vw;
      }

      .item-list {
        display: flex;
        background-color: white;
        height: 45vh;
        align-items: center;
        justify-content: space-evenly;
        padding-bottom: 1.5vh;
        padding-top: 1.5vh;
      }

      .seedbox,
      .protectionbox {
        width: 15vw;
        height: 45vh;
        display: flex;
        flex-direction: column;
        margin-right: 2.9vh;
        border: 0.5px solid rgb(185, 179, 179);
        border-radius: 10%;
        transition: 0.5s;
        position: relative;
      }

      .seedbox:hover {
        cursor: pointer;
        transform: scale(1.04);
      }

      html {
        scroll-behavior: smooth;
      }

      .categoryh2 {
        font-size: xx-large;
        font-family: 'Montserrat', sans-serif;
        padding: 5px 0px;
      }

      .seedstext,
      .protectiontext {
        font-size: 1.3rem;
        text-align: center;
        line-height: 1.2;
        font-weight: 600;
        font-family: 'Anek Devanagari';
      }
      
      .pname {
        font-size: 1.5rem;
      }

      .pprice {
        font-weight: 750;
        font-size: 1.45rem;
      }
      .vertical{
        height: 145%;
      }
      .endline {
        text-align: center;
        color: green;
        font-size: 1.2rem;
        font-weight: 700;
        font-family: 'Anek Devanagari';
      }

      .viewmore {
        color:black;
        font-size: 1.2rem;
        padding: 15px 10px;
        font-weight: 700;
        font-family: 'Roboto slab',sans-serif;
      }

      .viewmore:hover {
        text-decoration: underline;
        cursor: pointer;
      }

      .seedimages {
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;

        border-radius: 10%;
        border: 0.5px solid rgb(185, 179, 179);
        border-bottom: 0px;

        border-bottom-left-radius: 0px;
        border-bottom-right-radius: 0px;
        height: 72%;
        box-sizing: border-box;
        margin-bottom: 2vh;
      }

      .key {
        font-size: xx-large;
        font-weight: 800;
        font-family: 'Roboto slab', sans-serif;
        padding: 5px 0px;
      }
    </style>
  </head>

  <body>
    <div class="navbar border">
      <a href="/">
        <div class="kklogo"></div>
      </a>
      <div class="navcontent">
        <div class="uppercontent border">
          <a href="">
            <div class="location size1 border">
              <div class="loclogo border">
                <i class="fa-solid fa-location-dot"></i>
              </div>
              <div class="currentlocation">
                <div class="currentLocationtext" style="font-size: 0.9rem">
                  Deliver to Aryan
                </div>
                <div class="currentlocationlive" style="font-size: 1.2rem;font-weight:bold;">
                  New Delhi 110089
                </div>
              </div>
            </div>
          </a>
          <div class="searchbar border">
            <form action="/search/product" class="searchbar" method="post">
              <input name="search" type="text" placeholder="Search..." id="searchInput"
                style="border: none; outline: none; text-indent: 15px" />
              <a href="">
                <button class="searchbutton" type="submit">
                  <i class="fa-solid fa-magnifying-glass icon" style="font-size: 1.65vw"></i>
                </button>
              </a>
            </form>
          </div>

          <div class="logo size2 border">
            <a href="/user/login">
              <div class="logodiv border userlogo">

                <i class="fa-solid fa-user" style="font-size: 1.65vw"></i>
              </div>
              <div class="logotext border">Login</div>
            </a>
          </div>


          <div class="logo size2 border">
            <a href="../public/index.html">
              <div class="logodiv border">
                <i class="fa-solid fa-shop" style="font-size: 1.65vw"></i>
              </div>
              <div class="logotext border">Join</div>
            </a>
          </div>
          <div class="logo border size2">
            <div class="logodiv border">
              <a href="/user/cart/show"><i class="fa-solid fa-cart-shopping" style="font-size: 1.8vw"></i>
            </div>
            <div class="logotext border">Cart</div></a>
          </div>
        </div>

      </div>
    </div>
    <div class="midpage">
      <button name="previous_banner" id="previous_banner" class="previous_banner change_banner border">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <button name="next_banner" id="next_banner" class="next_banner change_banner border">
        <i class="fa-solid fa-chevron-right"></i>
      </button>
      <a href="user/products/all">
        <div class="banner border size4">

        </div>
      </a>

      {{#each products as |product|}}
      <div class="category">
        <h2 class="key">{{@key}}</h2>
        <div>
          <h4 class="viewmore">View more</h4>
        </div>
      </div>

      <div class="item-list">
        {{!-- <div class="button"> --}}
          <button id="next_product" style="
              border-top-left-radius: 10px;
              border-bottom-left-radius: 10px;
              background-color: whitesmoke;
              border: 0;
              height: 15vh;
              width: 2.5vw;
              z-index: 2;
              position: absolute;
              right: 0.55vw;
              transition: 0.3s;
              
              
            ">
            <i class="fa-solid fa-chevron-right"></i>
          </button>
          <button id="previous_product" style="
              border-top-right-radius: 10px;
              border-bottom-right-radius: 10px;
              background-color: whitesmoke;
              border: 0;
              height: 15vh;
              width: 2.5vw;
              z-index: 2;
              position: absolute;
              left: 0.6vw;
              transition: 0.3s;
            ">
            <i class="fa-solid fa-chevron-left"></i>
          </button>
          {{!--
        </div> --}}

        {{#each product as |p|}}
        <div class="product">
          <a href="/user/products/{{p._id}}">
            <div class="seedbox border" id="seedbox_1">
              <div class="seedimages border" style="background-image: url({{p.imageUrl}})"></div>
              <div class="seedstext border"><span>{{p.name}}</span> <br>

                <span class="pprice">₹ {{p.price}}</span><br>
              </div>
              <p class="endline"> Free Delivery </p>
            </div>
          </a>
        </div>
        {{/each}}
      </div>
      {{/each}}
    </div>

    {{>endpage}}
    {{!--
    <div class="space"></div> --}}


    <a href="#" class="to-top">
      <i class="fas fa-chevron-up"></i>
    </a>
    <script src="https://cdn.botpress.cloud/webchat/v1/inject.js"></script>
    <script src="https://mediafiles.botpress.cloud/5e49dc67-fc1a-4719-8922-815140407079/webchat/config.js"
      defer></script>
    <script src="../index.js"></script>
    <script src="../toTop.js"></script>


   <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
  <script>
      let viewmore=document.querySelectorAll('.viewmore')
      viewmore.forEach(Element=>{
        Element.addEventListener('click',(ev)=>{
        console.log("hey")
        let key=ev.target.closest('.category').querySelector('.key')
        let txt=key.innerText.trim()
        window.location.href = `/product/search/${txt}`;
        {{!-- axios.get(`/product/search/${txt}`).then((data)=>{
          console.log(data.data)
        }).catch((err)=>{console.log(err)}) --}}
      })
      })
    </script>
  </body>
</html>